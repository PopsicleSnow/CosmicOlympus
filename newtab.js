var web_engine=document.getElementById("web_engine"),hover_button=document.getElementById("hover_button"),google=document.getElementById("google"),duckduckgo=document.getElementById("duckduckgo"),bing=document.getElementById("bing"),bg_color=document.getElementById("b_color"),alert=document.getElementById("shame_alert");function load(){chrome.storage.local.get("search",function(e){engine=e.search,console.log(engine),"undefined"!=engine?engine_change(engine):engine_change("google")}),chrome.storage.local.get("Background_Color",function(e){color=e.Background_Color,"undefined"!=color&&(document.body.style.backgroundColor=e.Background_Color)});var e=getRGB(window.getComputedStyle(document.body).backgroundColor);bg_color.value=rgbToHex(parseInt(e.red),parseInt(e.green),parseInt(e.blue))}function getRGB(e){var n=e.match(/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)?(?:, ?(\d(?:\.\d?))\))?/);return n?{red:n[1],green:n[2],blue:n[3]}:{}}function rgbToHex(e,n,o){return"#"+((1<<24)+(e<<16)+(n<<8)+o).toString(16).slice(1)}function hexToRgb(e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function saveSettings(){chrome.storage.local.set({Background_Color:bg_color.value})}function engine_change(e){google.style.display="",duckduckgo.style.display="",bing.style.display="","duckduckgo"==e?(chrome.storage.local.set({search:"duckduckgo"}),web_engine.action="https://www.duckduckgo.com/",hover_button.src="images/duckduckgo_icon.png"):(chrome.storage.local.set({search:`${e}`}),web_engine.action=`https://www.${e}.com/search`,hover_button.src=`images/${e}_icon.png`),$(".dropdown-content button").css({"border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"}),$(".dropdown-content button:visible:last").css({"border-bottom-left-radius":"20px","border-bottom-right-radius":"20px"})}function theme_color(e){document.body.style.backgroundColor=e;var n=hexToRgb(e);n.r+=22,n.g+=22,n.b+=22,n.r-22>130&&n.g-22>130&&n.b-22>130?(alert.style.backgroundColor=`rgb(${n.r}, ${n.g}, ${n.b})`,alert.style.display="inline"):alert.style.display="none",document.getElementById("search_box").style.background=`rgb(${n.r}, ${n.g}, ${n.b})`}function dragElement(e){var n=0,o=0,t=0,c=0;function r(e){(e=e||window.event).preventDefault(),t=e.clientX,c=e.clientY,document.onmouseup=g,document.onmousemove=d}function d(r){(r=r||window.event).preventDefault(),n=t-r.clientX,o=c-r.clientY,t=r.clientX,c=r.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-n+"px"}function g(){document.onmouseup=null,document.onmousemove=null}document.getElementById(e.id+"header")?document.getElementById(e.id+"header").onmousedown=r:e.onmousedown=r}google.addEventListener("click",function(){engine_change("google")}),duckduckgo.addEventListener("click",function(){engine_change("duckduckgo")}),bing.addEventListener("click",function(){engine_change("bing")}),bg_color.addEventListener("input",function(){theme_color(bg_color.value)}),$(document).ready(load()),settings_screen=$(".settings_modal"),$(document).click(function(e){$(e.target).closest(".settings_modal, #setting_button").length||settings_screen.css("display","none"),$(e.target).closest("#setting_button").length&&("none"==settings_screen.css("display")?settings_screen.css("display","block"):settings_screen.css("display","none"))}),dragElement(document.getElementById("astronaut"));
